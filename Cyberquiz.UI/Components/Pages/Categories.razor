@using Cyberquiz.Shared.DTOs
@using Cyberquiz.UI.Components.Pages.Components
@using Cyberquiz.UI.Services
@inject NavigationManager Nav
@inject ApiService ApiService
<h3>Categories</h3>

<h2>Välj en kategori</h2>

@if (categories == null)
{
    <p>Loading...</p>
}
else if (categories.Count == 0)
{
    <p>No categories found.</p>
}
else
{
    <CategoryList Categories="categories" OnCategorySelected="GoToSubCategory" />
}

@code {
    private List<CategoryDto>? categories;

    protected override async Task OnInitializedAsync()
    {
         categories = await ApiService.GetCategoriesAsync();
    }

    private void GoToSubCategory(int categoryId)
    {
        Nav.NavigateTo($"/categories/{categoryId}/subcategories");
    }

}
